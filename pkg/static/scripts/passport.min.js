!function(t,n,e,i,r){"use strict";var a=t.Passport=t.Passport||{debug:r.debug},o={fingerprint:void 0,metadata:void 0},c=0,d=!1,s=!1;function p(t){a.debug&&i(r.prefix+t)}function f(t,n){if(!d&&c>r.limit&&i(r.prefix+"critical: payload was not be sent"),d||c>r.limit)return clearInterval(t),void p(n+" is done");s||(s=!0,c++,e({type:"POST",url:r.endpoint,data:JSON.stringify(o),contentType:"application/json; charset=utf-8",xhrFields:{withCredentials:!0},success:function(){d=!0,a.fingerprint=o.fingerprint,a.metadata=o.metadata,p("sender has synced a payload")},complete:function(){s=!1,p(n+" has sent a notification to "+r.endpoint)}}))}var l,u=setInterval((l=1,(new n).get(function(t,n){o.fingerprint=t,o.metadata=n}),function(){(new n).get(function(t,n){t!==o.fingerprint&&(o.fingerprint=t,o.metadata=n,l=0,p("corrector has made a correction")),++l>=r.threshold&&f(u,"corrector")})}),r.correct),g=setInterval(function(){f(g,"watcher")},r.watch)}(window,window.Fingerprint2,window.jQuery.ajax,window.console.log,{endpoint:"{{.Endpoint}}",prefix:"passport: ",limit:{{.Limit}},threshold:{{.Threshold}},correct:{{.Correct}},watch:{{.Watch}},debug:{{.Debug}}});
