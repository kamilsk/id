!function(t,n,r,e,o,a){"use strict";t.Passport={fingerprint:void 0,metadata:void 0,counter:void 0,synced:void 0};var i={fingerprint:void 0,metadata:void 0,counter:void 0},c=!1,s=!1;function d(t){a&&o("passport: "+t)}function u(r,o){d(o+" has sent a notification");var a=("/"===n.substr(-1)?n.substr(0,n.len-1):n)+"{{.Endpoint}}";e({type:"POST",url:a,data:JSON.stringify(i),contentType:"application/json; charset=utf-8",success:function(){c=!0,clearInterval(r),t.Passport.fingerprint=i.fingerprint,t.Passport.metadata=i.metadata,t.Passport.counter=i.counter,d("sender has synced a payload"),d(o+" is done")},complete:function(){s=!1}})}function p(){return!c&&i.counter>{{.Limit}}&&o("passport: critical: payload was not be sent"),c||i.counter>{{.Limit}}}var f=setInterval(function(){!s&&(new r).get(function(t,n){if(t!==i.fingerprint&&(i.fingerprint=t,i.metadata=n,i.counter=0,d("corrector has made a correction")),i.counter++,p())return clearInterval(f),void d("corrector is done");i.counter>={{.Threshold}}&&(s=!0,u(f,"corrector"))})},{{.Correct}}),l=setInterval(function(){if(p())return clearInterval(l),void d("watcher is done");s||(s=!0,u(l,"watcher"))},{{.Watch}})}(window,"{{.BaseURL}}",window.Fingerprint2,window.jQuery.ajax,window.console.log,{{.Debug}});
