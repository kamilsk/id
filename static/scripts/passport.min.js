!function(t,e,n,i,r){"use strict";var a=t.Passport=t.Passport||{debug:r.debug},o={fingerprint:void 0,metadata:void 0},c=0,s=!1,d=!1;function p(t){a.debug&&i(r.prefix+t)}function f(t,e){if(!s&&c>r.limit&&i(r.prefix+"critical: payload was not be sent"),s||c>r.limit)return clearInterval(t),void p(e+" is done");d||(d=!0,c++,n({type:"POST",url:r.endpoint,data:JSON.stringify(o),contentType:"application/json; charset=utf-8",xhrFields:{withCredentials:!0},success:function(){s=!0,a.fingerprint=o.fingerprint,a.metadata=o.metadata,p("sender has synced a payload")},complete:function(){d=!1,p(e+" has sent a notification to "+r.endpoint)}}))}var l,u=setInterval((l=1,(new e).get(function(t,e){o.fingerprint=t,o.metadata=e}),function(){(new e).get(function(t,e){t!==o.fingerprint&&(o.fingerprint=t,o.metadata=e,l=0,p("corrector has made a correction")),++l>=r.threshold&&f(u,"corrector")})}),r.correct),g=setInterval(function(){f(g,"watcher")},r.watch)}(window,window.Fingerprint2,window.jQuery.ajax,window.console.log,{endpoint:"{{.Endpoint}}",prefix:"passport: ",limit:{{.Limit}},threshold:{{.Threshold}},correct:{{.Correct}},watch:{{.Watch}},debug:{{.Debug}}});
